---
title: "DrexelRSeminarSummer19"
output: html_document
---
Ok, this is my first effort at making a course in RStudio.

To get to this point you've done the basics of getting R installed, RStudio, and connecting it to Git. *done*

You will want to Fork this Repo to make your own. *done*

To get started you'll need to install some packages, they are:

here, pacman, tidyverse *done*

In order to get started, you have an assignment: 
I have provided in the data folder several files that include the test responses and the grades for two classes, as well as a grading key. 

The first part of this course will get you going and require you to clean up this data - NO EXCEL!!!!

I want a script that imports the data *done*, combines it all into one dataframe *done*, and that correlates the test score with the quiz 1 grade and quiz 2 grade .  


```{r SetupEnvironment, echo=FALSE}
pacman::p_load(here, tidyverse, dplyr, plyr, ggpubr, CTT )

```


Make the data pretty! First read in the csv files to data frames. Rename columns so they match between the two data sets (can't bind them without matching names). Select the columns to keep and bind. Bind!
```{r}
#read in the csv files
AnonCourseGrades1712 <- read.csv("data/AnonCourseGrades1712.csv")
AnonCourseGrades1812 <- read.csv("data/AnonCourseGrades1812.csv")
AnonTestResponses <- read.csv("data/AnonTestResponses - TestData1709to1812.csv")
TestKey <- read.csv("data/TestKey.csv", header = FALSE)
```

```{r}
#Rename the quiz columns to match across data files
names(AnonCourseGrades1712)[names(AnonCourseGrades1712)=="Q1..Total.Pts..100...1447316"] <- "Quiz1_Percent"
names(AnonCourseGrades1712)[names(AnonCourseGrades1712)=="Q2..Total.Pts..100...1447318"] <- "Quiz2_Percent"


#Rename the quiz columns to match across data files
names(AnonCourseGrades1812)[names(AnonCourseGrades1812)=="Quiz1..Total.Pts..90.Score...1719589"] <- "Quiz1_Percent"
names(AnonCourseGrades1812)[names(AnonCourseGrades1812)=="Quiz2..Total.Pts..100.Score...1719590"] <- "Quiz2_Percent"
```

```{r}
#rename columns so they aren't a billion miles long

names(AnonTestResponses) <- c('Time Stamp','ID','Lecture Section','Q1','Q2','Q3','Q4','Q5','Q6','Q7','Q8','Q9','Q10','Q11','Q12','Q13','Q14','Q15','Q16','Q17','Q18','Q19','Q20','Q21','Q22','Q23','Q24','Q25','Q26','Q27','Q28','Q29','Q30')

#Pulls only the first letter of the answers for all columns but the first 3
for (i in colnames(AnonTestResponses[,-c(1:3)])){
  AnonTestResponses[[i]] <- substr(AnonTestResponses[[i]], 0, 1) 
}
```

AUTO SCORE THE SHIT
```{r}

myscores <- score(AnonTestResponses[,-c(1:3)],TestKey$V1)
AnonTestResponses$TestScores <- myscores$score
AnonTestResponses$TestPercent <- AnonTestResponses$TestScores /30. *100

```

```{r}
AnonCourseGrades1712$Course = 1712
AnonCourseGrades1812$Course = 1812

BothCoursesA <- rbind(select(AnonCourseGrades1712,"Course", "ID", "Quiz1_Percent","Quiz2_Percent"),select(AnonCourseGrades1812,"Course","ID","Quiz1_Percent","Quiz2_Percent"))

TestThings <- select(AnonTestResponses,"ID","TestScores","TestPercent","Time Stamp")


BothCourses <- merge(BothCoursesA, TestThings, by.x = "ID")
BothCourses$`Time Stamp` <- substr(BothCourses$`Time Stamp`, 0, 10)
BothCourses$`Time Stamp`<- as.Date(BothCourses$`Time Stamp`,format='%m/%d/%Y')


BothCourses$"Pre/Post" <- lapply(BothCourses$`Time Stamp`, function(x) if(x < as.Date("10/15/2017", format='%m/%d/%Y')) {"Pre2017"} else {if(x < as.Date("1/15/2018", format='%m/%d/%Y')) {"Post2017"} else {if(x < as.Date("10/15/2018", format='%m/%d/%Y')) {"Pre2018"} else {"Post2018"}}})




```


```{r}
ggscatter(subset(BothCourses, BothCourses$`Pre/Post`== "Pre2017"), x = "Quiz1_Percent", y = "TestPercent", 
          add = "reg.line", conf.int = TRUE, 
          cor.coef = TRUE, cor.method = "pearson",
          title = "Quiz 1 vs FCI Pre-score, 2017",
          xlab = "Quiz 1 Score", ylab = "FCI Pre-Score")
```
```{r}
ggscatter(subset(BothCourses, BothCourses$`Pre/Post`== "Post2017"), x = "Quiz1_Percent", y = "TestPercent", 
          add = "reg.line", conf.int = TRUE, 
          cor.coef = TRUE, cor.method = "pearson",
          title = "Quiz 1 vs FCI Post-score, 2017",
          xlab = "Quiz 1 Score", ylab = "FCI Post-Score")
```
```{r}
ggscatter(subset(BothCourses, BothCourses$`Pre/Post`== "Pre2018"), x = "Quiz1_Percent", y = "TestPercent", 
          add = "reg.line", conf.int = TRUE, 
          cor.coef = TRUE, cor.method = "pearson",
          title = "Quiz 1 vs FCI Pre-score, 2018",
          xlab = "Quiz 1 Score", ylab = "FCI Pre-Score")
```

```{r}
ggscatter(subset(BothCourses, BothCourses$`Pre/Post`== "Post2018"), x = "Quiz1_Percent", y = "TestPercent", 
          add = "reg.line", conf.int = TRUE, 
          cor.coef = TRUE, cor.method = "pearson",
          title = "Quiz 1 vs FCI Post-score, 2018",
          xlab = "Quiz 1 Score", ylab = "FCI Post-Score")
```




```{r}
ggscatter(subset(BothCourses, BothCourses$`Pre/Post`== "Pre2017"), x = "Quiz2_Percent", y = "TestPercent", 
          add = "reg.line", conf.int = TRUE, 
          cor.coef = TRUE, cor.method = "pearson",
          title = "Quiz 2 vs FCI Pre-score, 2017",
          xlab = "Quiz 2 Score", ylab = "FCI Pre-Score")
```
```{r}
ggscatter(subset(BothCourses, BothCourses$`Pre/Post`== "Post2017"), x = "Quiz2_Percent", y = "TestPercent", 
          add = "reg.line", conf.int = TRUE, 
          cor.coef = TRUE, cor.method = "pearson",
          title = "Quiz 2 vs FCI Post-score, 2017",
          xlab = "Quiz 2 Score", ylab = "FCI Post-Score")
```
```{r}
ggscatter(subset(BothCourses, BothCourses$`Pre/Post`== "Pre2018"), x = "Quiz2_Percent", y = "TestPercent", 
          add = "reg.line", conf.int = TRUE, 
          cor.coef = TRUE, cor.method = "pearson",
          title = "Quiz 2 vs FCI Pre-score, 2018",
          xlab = "Quiz 2 Score", ylab = "FCI Pre-Score")
```

```{r}
ggscatter(subset(BothCourses, BothCourses$`Pre/Post`== "Post2018"), x = "Quiz2_Percent", y = "TestPercent", 
          add = "reg.line", conf.int = TRUE, 
          cor.coef = TRUE, cor.method = "pearson",
          title = "Quiz 2 vs FCI Post-score, 2018",
          xlab = "Quiz 2 Score", ylab = "FCI Post-Score")
```
